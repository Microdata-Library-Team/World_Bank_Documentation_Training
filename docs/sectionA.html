

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12. Section A . Data Validations in Stata: Practical Examples &mdash; Guide for Data Archivists  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="11. Independent quality review" href="qualityReview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Guide for Data Archivists
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="organizingFiles.html">2. Before you start: organizing your files</a></li>
<li class="toctree-l1"><a class="reference internal" href="prepData.html">3. Gathering and preparing the data set</a></li>
<li class="toctree-l1"><a class="reference internal" href="prepDocumentation.html">4. Gathering and preparing the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="importData.html">5. Importing data and establishing relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="importResources.html">6. Importing external resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="completeMetadata.html">7. Completing metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="createVarGroups.html">8. Creating variable groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">9. Running validations and diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdfDoc.html">10. Generating the survey documentation in PDF</a></li>
<li class="toctree-l1"><a class="reference internal" href="qualityReview.html">11. Independent quality review</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. Section A . Data Validations in Stata: Practical Examples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Guide for Data Archivists</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>12. Section A . Data Validations in Stata: Practical Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sectionA.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="section-a-data-validations-in-stata-practical-examples">
<h1>12. Section A . Data Validations in Stata: Practical Examples<a class="headerlink" href="#section-a-data-validations-in-stata-practical-examples" title="Permalink to this headline">¶</a></h1>
<p><strong>Example 1 . Check for unique identifiers (single variable)</strong></p>
<p>This example uses a Country Opinion Survey and uses the Stata command
<em>-isid-</em> to check whether the variable “id” uniquely identifies the
observations. Each row of the data represents a different Country’s
Stakeholders and the variable that identifies each one is named “id”.</p>
<img alt="_images/Pag50_1.png" src="_images/Pag50_1.png" />
<p>If, after running the <em>-isid-</em> command you have not got an error
message, it indicates that the “id” is unique and identifies each
unit of analysis.</p>
<p><strong>Example 2 . Check for unique identifiers (single variable)</strong></p>
<p>For this example, we use the same data than <em>Example 1</em>, but in this
case, there are some hypothetical observations with the same values
for the variable “id”. The highlight observations are the duplicates
IDs.</p>
<img alt="_images/Pag50_2.png" src="_images/Pag50_2.png" />
<p>Since there are not unique IDs in the data, it is also useful to see
the list of all duplicates. To do that, we can use the Stata command
<em>-duplicates list-</em>.</p>
<img alt="_images/Pag51_1.png" src="_images/Pag51_1.png" />
<p><strong>Example 3 . Check for unique identifiers (ID made of multiple variables)</strong></p>
<p>The Multiple Indicator Cluster Survey at Women-level data is used in this
example. According to the study’s metadata, the unique identification of
each woman is the combination of variables HH1 (Cluster Number), HH2
(Household Number) and Ln (Line Number of women), so instead of checking
the unique identifier in just one variable, we are checking this condition
in this group of variables.</p>
<img alt="_images/Pag51_2.png" src="_images/Pag51_2.png" />
<p>After running this validation, it is possible to see that the combination
of “HH1”, “HH2” and “ln” generates a unique ID.</p>
<p><strong>Example 4 . Check for duplicate observations</strong></p>
<p>This example uses the dataset mentioned in example 2, in which there are
3 duplicated identifiers.</p>
<img alt="_images/Pag52_1.png" src="_images/Pag52_1.png" />
<p>As shown, 446 records are unique in the database, but there are six
observations for which there are two copies of each one. Now, it is
necessary to identify duplicates. The code below allows one to generate
a variable that tags the duplicates with a value 1 or more, depending
on the number of times a record is duplicated.</p>
<img alt="_images/Pag52_2.png" src="_images/Pag52_2.png" />
<p>The table above shows that records with the IDs 101, 104 and 111 each
have one duplicate.</p>
<p><strong>Example 5 . Check the merge between datafiles</strong></p>
<p>The code below helps us combine the data collected at the
individual-level with the data collected at the household-level.
In this case, we have two hierarchical datasets, in the household data
each row represents one household, and each household has members or
individuals. So, we need to combine many observations from one data set
(individual-level) with one observation from the other (household-level).
The ID of the household data set is the unique identifier that we are
using for the merge (“HH1”and “HH2”).</p>
<img alt="_images/Pag53_1.png" src="_images/Pag53_1.png" />
<p>The report shows that all observations in the Individual file have a
corresponding household in the household data set and that all households
have at least one member. However, let’s consider a hypothetical example
that contains some records that do not match, below the results of the merge:</p>
<img alt="_images/Pag53_2.png" src="_images/Pag53_2.png" />
<p>The merge command resulted in: 15 nonmatched observations originated from
the master data and 2 from the using data. The inconsistencies between
databases could be the result of a data entry error or processing errors
and these also need to be referred to the data producer before documentation
begins.</p>
<p><strong>Example 6 . Check variables full of missing values</strong></p>
<p>In the example above, there are 3 variables (WM1_1, WM3_1 and WM5_1) full
of missing values. As shown in the table, the <em>-misstable summarize-</em> command
allows one to identify all those cases at once. It is like tabulating every
single variable to identify missing values but more efficiently.</p>
<img alt="_images/Pag54_1.png" src="_images/Pag54_1.png" />
<p><strong>Example 7 . Check the completeness of the data files</strong></p>
<p>This example shows how you can check for discrepancies (if any) between
the variables from the MICS women’s questionnaire and the data set.</p>
<img alt="_images/Pag55_1.png" src="_images/Pag55_1.png" />
<p>As shown, this dataset contains all variables from the section “Woman’s
background,” and they are organized according to the questionnaire.
The comparison between variables in the questionnaire to those in the
data set should be made for every section in the questionnaire.</p>
<p><strong>Example 8 . Check all variables are labelled</strong></p>
<img alt="_images/Pag55_2.png" src="_images/Pag55_2.png" />
<p>The following Form is available at www.surveynetwork.org</p>
<img alt="_images/image16.png" src="_images/image16.png" />
<img alt="_images/image17.png" src="_images/image17.png" />
<img alt="_images/image18.png" src="_images/image18.png" />
<img alt="_images/image19.png" src="_images/image19.png" />
<img alt="_images/image20.png" src="_images/image20.png" />
<img alt="_images/image21.png" src="_images/image21.png" />
<img alt="_images/image22.png" src="_images/image22.png" />
<img alt="_images/image23.png" src="_images/image23.png" />
<img alt="_images/image24.png" src="_images/image24.png" />
<img alt="_images/image25.png" src="_images/image25.png" />
<img alt="_images/image26.png" src="_images/image26.png" />
<img alt="_images/image27.png" src="_images/image27.png" />
<img alt="_images/image28.png" src="_images/image28.png" />
<img alt="_images/image29.png" src="_images/image29.png" />
<img alt="_images/image30.png" src="_images/image30.png" />
<img alt="_images/image31.png" src="_images/image31.png" />
<img alt="_images/image32.png" src="_images/image32.png" />
<img alt="_images/image33.png" src="_images/image33.png" />
<img alt="_images/image34.png" src="_images/image34.png" />
<dl class="footnote brackets">
<dt class="label" id="id1"><span class="brackets">2</span></dt>
<dd><p>See section 3 – <em>Importing data and establishing relationships</em> for
more information on key variables.</p>
</dd>
<dt class="label" id="id2"><span class="brackets">3</span></dt>
<dd><p>In Stata, this can be done through the use of the <em>group</em> function
from the <em>egen</em> command. For example, to create a variable hhid based
on a combination of variables <em>province</em>, <em>district</em>, <em>ea</em> and
<em>hhnum</em>, use the command “egen hhid=group(province district ea hh_num
)”.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="qualityReview.html" class="btn btn-neutral float-left" title="11. Independent quality review" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Olivier Dupriez, Diana Marcela Sanchez Castro, Matthew Welch

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>